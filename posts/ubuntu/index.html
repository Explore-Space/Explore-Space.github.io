<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content="#494f5c"><meta name=msapplication-TileColor content="#494f5c"><meta itemprop=name content="Ubuntu"><meta itemprop=description content="0x00 摘要 Ubuntu 的安装与配置 0x01 前言 虽然在虚拟机和备用机上多次安装过许多Linux发行版，但在物理机上安装 Ubuntu ，还是免不了遇到各种各样的问题，所以写下这"><meta itemprop=datePublished content="2018-12-07T23:55:03+08:00"><meta itemprop=dateModified content="2018-12-07T23:55:03+08:00"><meta itemprop=wordCount content="1668"><meta itemprop=keywords content="Linux,Ubuntu,折腾日志,"><meta property="og:title" content="Ubuntu"><meta property="og:description" content="0x00 摘要 Ubuntu 的安装与配置 0x01 前言 虽然在虚拟机和备用机上多次安装过许多Linux发行版，但在物理机上安装 Ubuntu ，还是免不了遇到各种各样的问题，所以写下这"><meta property="og:type" content="article"><meta property="og:url" content="https://unsplash.top/posts/ubuntu/"><meta property="article:published_time" content="2018-12-07T23:55:03+08:00"><meta property="article:modified_time" content="2018-12-07T23:55:03+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ubuntu"><meta name=twitter:description content="0x00 摘要 Ubuntu 的安装与配置 0x01 前言 虽然在虚拟机和备用机上多次安装过许多Linux发行版，但在物理机上安装 Ubuntu ，还是免不了遇到各种各样的问题，所以写下这"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><title>Ubuntu</title><link rel=stylesheet href=https://unsplash.top/css/style.min.657bcb7af31123e4156b1a3d2ff60a636717e54ead74f882136b5114cf72b55e.css integrity="sha256-ZXvLevMRI+QVaxo9L/YKY2cX5U6tdPiCE2tRFM9ytV4=" crossorigin=anonymous></head><body id=page><header id=site-header class="animated slideInUp faster"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://unsplash.top>An's Blog</a></div><nav class="site-nav hide-in-mobile"><a href=https://unsplash.top/posts/>Posts</a>
<a href=https://unsplash.top/tags/>Tags</a>
<a href=https://unsplash.top/music/>Music</a>
<a href=https://unsplash.top/gallery/>Gallery</a>
<a href=https://unsplash.top/about/>About</a></nav></div><div class="hdr-right hdr-icons"><button id=toc-btn class="hdr-btn desktop-only-ib" title="Table of Contents"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3" y2="6"/><line x1="3" y1="12" x2="3" y2="12"/><line x1="3" y1="18" x2="3" y2="18"/></svg></button><span class="hdr-social hide-in-mobile"><a href=https://github.com/Explore-Space/ target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://gitlab.com/Explore-Space target=_blank rel="noopener me" title=Gitlab><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22.65 14.39 12 22.13 1.35 14.39a.84.84.0 01-.3-.94l1.22-3.78 2.44-7.51A.42.42.0 014.82 2a.43.43.0 01.58.0.42.42.0 01.11.18l2.44 7.49h8.1l2.44-7.51A.42.42.0 0118.6 2a.43.43.0 01.58.0.42.42.0 01.11.18l2.44 7.51L23 13.45a.84.84.0 01-.35.94z"/></svg></a></span><button id=menu-btn class=hdr-btn title=Menu><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://unsplash.top/posts/>Posts</a></li><li><a href=https://unsplash.top/tags/>Tags</a></li><li><a href=https://unsplash.top/music/>Music</a></li><li><a href=https://unsplash.top/gallery/>Gallery</a></li><li><a href=https://unsplash.top/about/>About</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>2018-12-07</span></div><h1>Ubuntu</h1></header><div class=content><hr><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css><script src=https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js></script><script src=https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js></script><p><meting-js server=netease type=song id=32019002></meting-js></p><h2 id=0x00-摘要>0x00 摘要<a href=#0x00-摘要 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>Ubuntu 的安装与配置</p><h2 id=0x01-前言>0x01 前言<a href=#0x01-前言 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>虽然在虚拟机和备用机上多次安装过许多Linux发行版，但在物理机上安装 Ubuntu ，还是免不了遇到各种各样的问题，所以写下这篇文章记录过程。</p><h2 id=0x02-内容>0x02 内容<a href=#0x02-内容 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><ul><li>基本情况<ul><li>软件<ul><li>OS:<ul><li>Ubuntu 18.04(LTS)</li><li>Ubuntu 18.10</li></ul></li></ul></li><li>硬件<ul><li>型号: 联想拯救者R720<ul><li>CPU: i5-7300HQ</li><li>内存： 8G DDR4</li><li>显卡： GTX 1050Ti(4G)</li><li>SSD:<ul><li>1: 128G NVME (Samsung)</li><li>2: 512G NVME (Hikvision-C2000Pro)</li></ul></li><li>HDD: 1T (Western Digital)</li><li>无线网卡: QCA9377</li><li>其余接口:<ul><li>1Gbps LAN口</li><li>3.5mm 耳机接口</li><li>HDMI * 1</li><li>USB2.0(Type-A) * 1</li><li>USB3.0 Gen1(Type-A) * 2</li><li>USB3.0 Gen1(Type-C) * 1(是否为全功能Type-C未测试)</li></ul></li></ul></li></ul></li></ul></li></ul><h3 id=引导>引导<a href=#引导 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>常见的引导方式有两种 <em>BIOS + MBR</em> ， <em>UEFI + GPT</em>，后者相较于前者有着诸多优点，也是未来的趋势，故笔者选用后者</p><h3 id=硬盘>硬盘<a href=#硬盘 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>在 BIOS 硬盘相关设置中</p><div class=highlight><pre class=chroma><code class=language-text data-lang=text>SATA Controller Mode

[AHCI]
Set SATA controller to AHCI mode.
[Intel RST Premium]
Set SATA controller to Interl RST Premium(RAID) mode.
</code></pre></div><p>默认选择后者，这会导致安装过程中，无法识别到固态硬盘，只有选到 AHCI 模式才可以。</p><blockquote><p><strong>存疑</strong></p><p>后来查阅资料后发现后者好像是需要驱动才可用，似乎对固态性能影响不大，故没有再关注这个问题</p></blockquote><h3 id=显卡>显卡<a href=#显卡 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><h4 id=现象>现象<a href=#现象 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>安装完成后，重启过程中报错</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>kernel:NMI watchdog: BUG: soft lockup - CPU#0 stuck <span class=k>for</span> 26s
</code></pre></div><p>强制关机后重启进入桌面，有明显卡顿感，几秒后系统进入假死状态</p><h4 id=原因>原因<a href=#原因 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><blockquote><p><strong>存疑</strong></p><p>CPU 过度使用， Linux 的内核锁死或者死循环导不能进入系统。最新的内核已经把视频模式设置嵌入内核中，所以所有显卡硬件程序的指定时钟和寄存器当图形服务器启动时在内核进行而不是图形设备运行，这使得在启动时可以看到不闪的和高分辨率的好看的启动界面，但是，在某些视频卡它不能正常工作而现实黑屏。</p></blockquote><h4 id=解决>解决<a href=#解决 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><h5 id=启用核显>启用核显<a href=#启用核显 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h5><p>在 BIOS 启动后，进入系统前，按 <em>Esc</em> 进入 grub 选择界面，按 <em>E</em> 编辑 grub ，在 <code>quiet splash</code> 后插入 <code>nomodeset</code> ，按 <em>F10</em> 或 <em>Ctrl</em> + <em>X</em> 保存后即可正常启动</p><p>启动后修改 grub 配置文件，默认禁用独显(后文会详述独显驱动安装，该处为方便暂时只用核显)。修改 <code>/etc/default/grub</code> 同上</p><p>更新 grub 配置</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>sudo update-grub
</code></pre></div><h5 id=启用独显>启用独显<a href=#启用独显 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h5><p>安装NVIDIA驱动(Ubuntu 18.04/18.10中可在 软件和更新 → 附加驱动 中找到开源和闭源驱动)</p><p>还原 grub 配置文件，即删除 <code>/etc/default/grub</code> 中 <code>quiet splash</code> 后的 <code>nomodeset</code></p><p>更新 grub 配置</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>sudo update-grub
</code></pre></div><p>如图,安装成功
<img src=/Image/posts/Ubuntu/001.png alt=效果></p><h5 id=插曲>插曲<a href=#插曲 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h5><blockquote><p>Linux creator Linus Torvalds talked in front of students at the Aalto University Center for Entrepreneurship in Otaniemi, Finland. The chat and its Q&A session was around an hour long and while the bulk of it is probably quite interesting, the best bit — by far — occurs at the 49-minute mark when Torvalds delivers his very frank opinion of NVIDIA and its support for Linux.</p><p>Linux的创造者Linus Torvalds在芬兰奥塔涅米的阿尔托大学创业中心的学生面前讲话。聊天和问答环节大约有一个小时，虽然大部分内容可能都很有趣，但迄今为止最好的一点发生在49分钟的时候，当时torvalds发表了他对nvidia及其对linux支持的非常坦率的意见。</p><p>One of the students asks for Torvalds' thoughts on NVIDIA and its reportedly poor support for its Optimus technology in Linux. The purpose of Optimus is to allow notebooks to dynamically switch between an Intel integrated graphics chip and an NVIDIA one, as performance requirements demand.</p><p>其中一名学生询问了torvalds对nvidia的看法，以及据说nvidia在linux中对optimus技术的支持不足。optimus的目的是允许笔记本电脑根据性能要求在英特尔集成图形芯片和nvidia芯片之间动态切换。</p><p>Here&rsquo;s his reply:</p><p>他的回答是：</p><blockquote><p>I know exactly what you&rsquo;re talking about and I&rsquo;m happy to say that it&rsquo;s the exception rather than the rule. I&rsquo;m also happy to very publicly point out that NVIDIA has been one of the worst trouble spots we&rsquo;ve had with hardware manufacturers.</p><p>我很清楚你在说什么，我很高兴地说这是个例外，而不是规则。我也很高兴非常公开地指出，nvidia一直是我们与硬件制造商之间最糟糕的问题之一。</p><p>And that is really sad because NVIDIA tries to sell chips — a lot of chips — into the Android market and NVIDIA has been the single worst company we&rsquo;ve every dealt with. So, NVIDIA, fuck you!</p><p>这真的很可悲，因为英伟达试图把芯片——很多芯片——卖给安卓市场，而且英伟达是我们所有交易中最糟糕的公司。所以，英伟达，**！</p></blockquote></blockquote><h3 id=lan>LAN<a href=#lan class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><h4 id=现象-1>现象<a href=#现象-1 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>Ubuntu 18.04 / 18.10 中，无法直接通过 设置 新建PPPOE连接</p><h4 id=原因-1>原因<a href=#原因-1 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>Ubuntu 18.04 / 18.10 中，采用 GNOME3 作为默认桌面环境，该问题为 GNOME3 的固有问题</p><h4 id=解决-1>解决<a href=#解决-1 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><h5 id=方案1推荐>方案1(推荐)<a href=#方案1推荐 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h5><p>其实在 Gnome3 的 NetworkManager 中包含 PPPOE 连接方式，不过无法直接通过桌面环境操作，执行以下命令</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>nm-connection-editor
</code></pre></div><p>在弹出的管理窗口中即可新建PPPOE连接</p><h5 id=方案2>方案2<a href=#方案2 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h5><p>使用 pppoeconf 建立 PPPOE 连接</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>sudo pppoeconf
</code></pre></div><p>P.S. 该方法在使用过程不稳定，故不推荐该方法</p><h3 id=wlan>WLAN<a href=#wlan class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><h4 id=现象-2>现象<a href=#现象-2 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>安装完成后，无线连接不可用，如图</p><p><img src=/Image/posts/Ubuntu/002.png alt=效果></p><h4 id=原因-2>原因<a href=#原因-2 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>执行以下命令</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>~$ rfkill list all
</code></pre></div><p>输出以下内容</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>0:ideapad_wlan: Wireless LAN
Soft blocked: no
Hard blocked:yes
1:ideapad_bluetooth: Bluetooth
Soft blocked: no
Hard blocked: yes
2:phy0: Wireless LAN
Soft blocked: no
Hard blocked:no
3:hci0: Bluetooth
Soft blocked: yes
Hard blocked: no
</code></pre></div><p>可以看到，优先级前的 ideapad_wlan 的 Hard blocked 默认为 yes ，即 Ubuntu 默认关闭了硬件 WLAN 开关，而 R720 这样机型的并没有硬件 WLAN 开关，所以导致 WLAN 无法开启。</p><h4 id=解决-2>解决<a href=#解决-2 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><h5 id=暂时>暂时<a href=#暂时 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h5><p>执行以下命令</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>sudo modprobe -r ideapad_laptop
</code></pre></div><h5 id=永久>永久<a href=#永久 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h5><p>在 <code>/etc/modprobe.d/ideapad.conf</code> 中添加 <code>blacklist ideapad_laptop</code> ， 重启</p><h2 id=0x03-尾巴>0x03 尾巴<a href=#0x03-尾巴 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>今天西安初雪，听说初雪许的愿望想的祝福都会实现,嗯~</p><p><img src=/Image/posts/Ubuntu/003.jpeg alt="雪景 (Photo by 谭浩声)"></p></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-feather"><path d="M20.24 12.24a6 6 0 00-8.49-8.49L5 10.5V19h8.5z"/><line x1="16" y1="8" x2="2" y2="22"/><line x1="17.5" y1="15" x2="9" y2="15"/></svg>An</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://unsplash.top/tags/linux>Linux</a></span><span class=tag><a href=https://unsplash.top/tags/ubuntu>Ubuntu</a></span><span class=tag><a href=https://unsplash.top/tags/%E6%8A%98%E8%85%BE%E6%97%A5%E5%BF%97>折腾日志</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>1668 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2018-12-07 23:55 +0800</p></footer></article><aside id=toc><div class=toc-title>Table of Contents</div><nav id=TableOfContents><ul><li><a href=#0x00-摘要>0x00 摘要</a></li><li><a href=#0x01-前言>0x01 前言</a></li><li><a href=#0x02-内容>0x02 内容</a><ul><li><a href=#引导>引导</a></li><li><a href=#硬盘>硬盘</a></li><li><a href=#显卡>显卡</a></li><li><a href=#lan>LAN</a></li><li><a href=#wlan>WLAN</a></li></ul></li><li><a href=#0x03-尾巴>0x03 尾巴</a></li></ul></nav></aside><div class="post-nav thin"><a class=next-post href=https://unsplash.top/posts/markdown-%CE%B1/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;Newer</span><br><span>Markdown</span></a></div><div id=comments class=thin><head><link rel=stylesheet href=/CSS/style.css></head><link rel=stylesheet type=text/css href=style.css><span id=/posts/ubuntu/ class=leancloud_visitors data-flag-title=Ubuntu><span class=post-meta-item-text>文章阅读量</span>
<span class=leancloud-visitors-count>1000000</span><p></p></span><div id=vcomments></div><script src=//cdn1.lncld.net/static/js/3.0.4/av-min.js></script><script src=//unpkg.com/valine/dist/Valine.min.js></script><script type=text/javascript>new Valine({el:'#vcomments',appId:'o6kNKVy8OrAHuF71KC2EPujN-MdYXbMMI',appKey:'to5t9x8LMWghJuruIljDWsvP',notify:'',verify:'',avatar:'retro',placeholder:'嘤嘤嘤～',visitor:'true'});</script></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2021 <a href=https://unsplash.top>An</a> &#183; <a href=https://creativecommons.org/licenses/by-nc-nd/4.0 target=_blank rel=noopener>CC BY-NC-ND 4.0</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://unsplash.top/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://unsplash.top/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin=anonymous></script></body></html>